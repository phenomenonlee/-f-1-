<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Bulma CSS 링크 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="../static/index.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="https://kit.fontawesome.com/190c91686f.js" crossorigin="anonymous"></script>
    <script>


        $(document).ready(function () {
            showContents(), check_cookie()
        });

        function check_cookie() {
            $.ajax({
                type: "GET",
                url: "/cookie",
                data: {},
                success: function (response) {
                    let cookie = response['cookie']
                    if (cookie == "정상") {
                        return
                    }
                    if (cookie == "만료") {
                        $.removeCookie('mytoken');
                        window.location.href = '/login';
                        alert('로그인 기한이 만료되었습니다.')
                        return
                    }
                }
            })
        }

        function hide_more_content_button() {
            $('#more_content-button').hide()
        }

        function delete_contents(button_index) {
            $.ajax({
                type: 'POST',
                url: '/delete',

                data: {'button_give': button_index},
                success: function (response) {
                    window.location.reload()
                    alert(response['msg'])

                }
            })

        }

        function favorite_content_del(index) {
            let con = document.querySelector('#favorite_block' + index)
            con.innerHTML = `<button onclick="favorite_content_del(${index})" class = "Favorites"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-through-heart" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M2.854 15.854A.5.5 0 0 1 2 15.5V14H.5a.5.5 0 0 1-.354-.854l1.5-1.5A.5.5 0 0 1 2 11.5h1.793l.53-.53c-.771-.802-1.328-1.58-1.704-2.32-.798-1.575-.775-2.996-.213-4.092C3.426 2.565 6.18 1.809 8 3.233c1.25-.98 2.944-.928 4.212-.152L13.292 2 12.147.854A.5.5 0 0 1 12.5 0h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.854.354L14 2.707l-1.006 1.006c.236.248.44.531.6.845.562 1.096.585 2.517-.213 4.092-.793 1.563-2.395 3.288-5.105 5.08L8 13.912l-.276-.182a21.86 21.86 0 0 1-2.685-2.062l-.539.54V14a.5.5 0 0 1-.146.354l-1.5 1.5Zm2.893-4.894A20.419 20.419 0 0 0 8 12.71c2.456-1.666 3.827-3.207 4.489-4.512.679-1.34.607-2.42.215-3.185-.817-1.595-3.087-2.054-4.346-.761L8 4.62l-.358-.368c-1.259-1.293-3.53-.834-4.346.761-.392.766-.464 1.845.215 3.185.323.636.815 1.33 1.519 2.065l1.866-1.867a.5.5 0 1 1 .708.708L5.747 10.96Z"/>
</svg></button>`
            $.ajax({
                type: 'POST',
                url: '/favorite_del',
                data: {'index_give': index},
                success: function (response) {
                    console.log('즐겨찾기')
                    alert(response['msg'])
                     window.location.reload()
                    return
                },
            })
        }

        function favorite_content(index) {//게시물의 인덱스 번호
            let con = document.querySelector('#favorite_block' + index)


            con.innerHTML = `<button onclick="favorite_content_del(${index})" class = "Favorites"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-through-heart-fill" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M2.854 15.854A.5.5 0 0 1 2 15.5V14H.5a.5.5 0 0 1-.354-.854l1.5-1.5A.5.5 0 0 1 2 11.5h1.793l3.103-3.104a.5.5 0 1 1 .708.708L4.5 12.207V14a.5.5 0 0 1-.146.354l-1.5 1.5ZM16 3.5a.5.5 0 0 1-.854.354L14 2.707l-1.006 1.006c.236.248.44.531.6.845.562 1.096.585 2.517-.213 4.092-.793 1.563-2.395 3.288-5.105 5.08L8 13.912l-.276-.182A23.825 23.825 0 0 1 5.8 12.323L8.31 9.81a1.5 1.5 0 0 0-2.122-2.122L3.657 10.22a8.827 8.827 0 0 1-1.039-1.57c-.798-1.576-.775-2.997-.213-4.093C3.426 2.565 6.18 1.809 8 3.233c1.25-.98 2.944-.928 4.212-.152L13.292 2 12.147.854A.5.5 0 0 1 12.5 0h3a.5.5 0 0 1 .5.5v3Z"/>
</svg></button>`


            $.ajax({
                type: 'POST',
                url: '/favorite',
                data: {'index_give': index},
                success: function (response) {
                    console.log('즐겨찾기')
                    alert(response['msg'])
                    window.location.reload()

                },
            })
        }


        var idx = 0;

        function showContents() {

            $.ajax({
                type: 'GET',
                url: '/con',
                data: {},
                success: function (response) {
                    let rows = response['contents']//출력해야 할 컨텐츠들
                    let favorite_content_index = response['favorite_list']//사용자가 즐겨찾기한 게시물 인덱스

                    if (favorite_content_index != undefined) {
                        favorite_content_index.sort(function (a, b) {
                            return b - a;
                        })
                    } else {
                        favorite_content_index = [-1]
                    }

                    let favorite_num = 0
                    let j = 0
                    for (let i = rows.length - idx - 1; ; i--) {
                        console.log(i, "  ", j)
                        if (i <= -1) {
                            hide_more_content_button()
                            break
                        }

                        if (j >= 10) {
                            idx += 10

                            break
                        }
                        j += 1

                        let URL = rows[i]["url"]

                        if (URL == "") {

                            URL = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBUVFRgWFhcZGRgaHBoaHBocGhoZHBocGhoaHBoaGh4cIS4lHB4sIRwaJjgnKy8xNTU1HCQ7QDs0Py40NTEBDAwMEA8QGhISGDQhISExNDQxNDE0NDQ0MTQxNDQ0NDQ0NDQ0ND80NDQ0ND80MTQ0NDQ0NDE0NDExMTE0MTQ/Mf/AABEIAN0A5AMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAFAAEDBAYCBwj/xAA+EAABAgQEAwYEBQQABQUAAAABAhEAAyExBBJBUQVhcSIygZGh8AaxwdETQlJi4RRygvEHFSNj0jNDkrLC/8QAGAEBAQEBAQAAAAAAAAAAAAAAAQACAwT/xAAeEQEBAQEBAAIDAQAAAAAAAAAAARECIRIxQVFhcf/aAAwDAQACEQMRAD8A4AhGHhhHRzPDQ8M0KMI6hQoKihQoYiFHhQgYeLU5aOgIRhotRmh4cR0hLlhAnLR0JZg9wrgBWM8x0p0Buft5QVVhMN3Rq4oNtPlBeocYpoYxqsfwQKGZDFIFACC+5eM3PllKiDpeKXQgMIQ8MRCiIh4UMBEjxyTHUKLU4eFCJjqJOTChQjEihQmhRJ3CiSZKUgsQQRvEYgRQoUKNIzQmhCHeCj+lChQoiQhCE0PEiaFCeOFzAL7P9ok7B2vGs4JwVMsCbM710p25wO+EuHZx+MsdlIdPM79KQd4hiyKgOTTdhpyuG9lsddfpqRV4zxUg5UkClBsLOfYjKLxqwLjzqo+FtT/qO+IT+9VyaltOWbRI3gHOxDM6uejDmkG9rmMW4ca7hXFlJUxc2zCnT30iT4jlgKChZfa8v9xleH4qxzMHoN+ZPu3ONbjVBchCv09l/D5eka5o6ngC0NHUNHRlyBCh3hRIzQxh4UScmHhGE0SMIYx0YYxIzwoUKIN+r8LEDtJGaxoxfY6vr7rleK8JXIO6dFfeCOEUtISXPU2I/SrcbPteDRmBaVIWHYeaS7+gjlOsbxgXh2ixxjAqkKzJ7aDrsOfu0VETARQx0nUossdmGaETEKMSl2ers38Qspmh4rDEp1LaAxxNnhyKFwbHWnrX20WnKugvCeBaZk9BBUglJqDYsbHoWjr+qUpaUAEKJOmqbjr94PlD8avrWw9+zFaXLK15QarsNr+QjkTakk1QCOT/AFveLHB15cyzVRVlTq3aAJHNvrGOuv01OW4w00JQiWgUSkW1I2GtdRsYfF5a689y1z60+8B+GpUhKHqQo2q4e3rBGcsZC/5XJ6CoHiY58tWMfxyYkE2CRdTOSdAkeVYzM7EpNq1t9SbRxxjiKlrq4D0FCfDbwithUMCWe7fxu7D03iMH+Dl1AWAGlQALqOsbWWpJw6iLA00jJcKwpYUBNHrTfytGsxhKMOAT3iPT3aOk/Dn0BwoUKOjJNDCOoYRIzQ2WHaHiTloUIwmiRRyRDmHiRoUKFEBrhuPS1HKT+Ul9NHto0Ev6gJUlX5S9dWcXMYH4b4qmYnIsstFQR+ZNe7zFXG3SNxLU/eAIYk7KSxL9bescHU81QyLSqqQfKtCNn+kYXGryTBcIWMpP6VbtqLeEb3D8MBUFPQot1KbNpU0ivj+CIWGZiwyvobOd4JsNuvPf6pZVlV2TyLv0+0dSEdsOo5kuQaVrUMbGDeN4IiUhRBdbpAJuKeof5c4pYLCFRcs+YKpQtlPaBFCCb/zGr1VJFvCrCldpKO1cHV6dHIrSOZ2ABWaBJbIAzDPQJ02fkYlODUlSEqTU5cyTWgt5GzfSOcRPVKUSuymyNVwksPFuUG1ZFvHYlVJZTQpIAOhSkKOU2NiP9wPRlUUKB7SSS7tmcAEjY6mC83CqRJSSl15UUSQpu1VrtQ35isS4XCDIxCXP4YpVql+Qv/8AUawIF/phMUkE0IqbEhy5Vt/EFcNwzKQg0SFdk61OvKnqYlGESmcpJosgJzAGgBts7D0MSYGcpZJJqgvs+YAno1YiO4GRllKzCoBH8xS4jhVmWupAU3XQEb3rC4fxgZVhTdlRBrcg162+e0E1zEnK9KhtaO4LdW8oQ8f4jgCFrISQlFAWuxYl9bx1gMOCntasSPJht75x6HxvhqfwVFKXJRkFbOouT5jyjLYWUEFiA4PZTTSgUrlB/p0V4Zh1AgOXagAs+pGmsXuOrYpR+kV1rFjgMtgVO5uosw8H/j7h8bOC5i1A6399I6c/bn0iEIwgIaOjJQ8NDtEDQmhAwjATGEYQhEwhyDDwocCJQ0KFCiaY7g0leZ1AgGym7p0UCK+zHpfDVugULghJGxP5R+25B2MdcK4dLyoYUAo4uFVoOuh5xenYcSxSgLPz+yr+fKOGeN2r2HWEOD3bjluPQ+kDcfilFXYJZgmnNTiugYesUcVjSy1AuAwJBDAkhiRsaecVMGSjsksZhufylObKAf06c35RHHaJS5qwkigSsn+00ArYg/IxPgMHkSxALUDGmtBTeCc1CkDKGfvJO6rkEjrHCpjpBLszKTQlJDlzyikCv/y5a1FZcUKDYlJCQSOh+sCuL4XPKWhnWA6GFWbNlBHMHzG0bCTMzk6/mNLuk/b0gDxjCqlK/GCiEoDtT8zgjxJd9olKzPB+IrM1mLZUpUVCqQBWm8abDSRkcP8ApSTUtmAcf5fIRmOFSDNxjtkzFlJa24fWoZ9hHpCMGkADK2Tx1qeZcPFhoHPOdRSoMczEVBNDqLDKxJ5jeEqUhClkN2qdAGKlN5+MFlSUtnUSM+wvd72DC/3iOXhM4dKXJYW0Bc33b20WBl+LYcSwkpzZlEjKAXyAhn5/eL2FxajNZShQEqZugCT5wRxvDVKPeLgkkDY6UrZq8ucU5/BF5nCRQaEMnYbndoLGpfwKrmBaMiS2jgOzi994FTOCIokB2ZybqNjWIsJOmoWRlJSG7SyEhuQ66RpMDNzFy1NNbAUGnUxbozFCVg1JlLRRzqOezxm18LWhzuSzW5Oecb5SAoEblz8gIF8UUkA2DigNPPl06Rrm5RWOUki/SGiWYoqqTStd9z784jMdZXOmEKGhwqHA5h4UKFEDCeGhNEsdCGMJIh4FChQzwojrS8HAyMk5wLpLgjwJMRcUxYLozDNQgKLBXibdYKY8oZ0XuGLH31gDhpCZ+bO4UDcNuaqBoeo3vHCukD5OIIUFBKkrqlSTVK0k9GDffmCbwOFCQ7UNwGVlemgt3T6wRwfDkJGUqo2pN/C3gR5xdlywlgBctVJIvUE3SNtOUUitcScOVJFgoW2vSulG7P2jhchKicyAlbM6bKA563BqItpAQvssxDEWI2vcfe0Q4tYWyhRlULs5qCDt73h/oLByE5wbApduYDEfKKPxnMQmSsqcApq29MhLXD+hg5wtOZLqFXV9ffjAH41Q8shQGVZAroSCnTRhBTPthfhPErlhSz3+wMpq4LORvQK3+ses4F1Aq/Vz3Fi3u8ePDCrROK1vkdJGlC4SQP8AFm2j1LgGNC0JqCQo5utPIMQYtasPxWSU5T+VLpyigLqB+gHnF3CSyBVmAYABgCzknT+BC4pOQlJKizF6/LzgLiuPy0IHbS7ZnJokEs76/WLWc0YnJd8ruenm5FafSIk8OapN9HIH++dbm0Z/hvxfh1rZK6mpfsgDck29jSNJh8alYcOebGn8xbKsDcfwxCg6iAweulLua+JpAThy1JOQMQ/eBJHidX2jYTpSSO0CX0u50f08oEcVwIUH7nJLhwWo4+8VhlTf1WQMCFKoGGh3Og6dIpzcLmzFSnJuzUvbasRSVoTuVXYpbyTEyZbjtP8A2nseAbTSKXQF4nDJT3Uja2ZRPNtIFTcOU94gcnrGhxKKdpSUpdmT2b6czrATGsKAU3CswPi0deazVMxzHQEPG2HMKEYQESO8cmOoTQSowMJ4UKIuXh4Z4eENPjVIWqj61AFD9I7wOGWg5iQHILHtBm7LNr5xzMyKWNNqF+bEfzF6Rh0CuatO89BycWjzutEpYt2m/tAb+IrY/FBAJr5hq1PhFhCks7u40EYj434vKTLUAsZyGCcz+Yf058obRJqtxH42loWpBJcfmQzH15/OIE/8QJZQQoA2qki+5HrHmOJkqKSsmmbKCbqJc0HIM/8AMc/0q0KZSVJJD1GUtoWNxBjWx7zwD4vkTEpCSxKg4OlPVyFRJ8V4hEyUUkOHApdyQzennHh3DJigQXYpL0ox5R6IOKqXh06rAcl9BryoBGbbDJA3HcQKwElytgl2FdHrqWbk5jRfCeLyKUDbKUs+iSzt0I8jtGKnYpRIFGS7Ea173VyIK8LxBFSXJTdrv7tzitmNSIvjPji1lSSolII9AA9IxGLxC1ZQSbOATbZ9z94P8VRnK99fr4vFULTLEmdLURPlk5kqTnQpNWUHoDUgprpGuZGboPg8yVBViC7+Ireulo9n+D/idCkJQuYQsMGIZ+maPHZmMWTmYFRWpdUhnUXNLZeUXTimIV/Noup74J7H0OvHo0UCTsX10iCYkEEvW9z72pHiuB4+tCkEl8tg7AdI9B4J8TCcBm7xsxsPe8W/tfHBOdglkglRVqAW18KR0peQZlAFX9xq+zCL09dqkjYeVXtSOUSyaMjxaju4peDEzuPmTFqSB1uaV1NvN4oT5C0d7MTumz++Ua+Zg0W7L3pfw1gROwqEPcFrqLpPXbpHTmsX0AUDrTy+UM0SzQH7NRu9zqeUcJSTHRnHEPHSg32jmLUYQociFEDEQ0PCiRoUdPCh05/Wtw0kIqMrdST/AB/uKnE+LoQklJrqk08AFB9TFvic1CO8thuK9PCvOPMvijiTkpStKgbN7DGsed1kT4/4sJdKFKS5s9NebgRnZ2KzqdSq+vv3rA1Ze5fem3y91jmaTcPtp9NP5iw7rjFTFKUQRRyWTaoFudBBTCY5a1lc0GYrJkQVqJKaMlXPKCWBikiYi7E/SLkvEBNEIyvZ7jn/AL3h3wTn1JgJBUrKKn1P8/eNhwvhExKQVAsxJDdAAfn4RY+EPhYkJWu+YFvAGvUOxEejHBDIUtZx9RHLq2tyyPK0cKzl8pZyOWopz+cFeGcCyqAPd+4sT5XgytKULIDFqszvd/COV45CEkuARetKGOeV0th+I/CSFoKk94hydyNfH20Y/jXwbPkpWoALQCAWJetHbbQ+Mer8CxiJ0sFO3Lk8E5mFCgQRQ3EdeZjjevXzVPlpD9mttdCR5xUUDcimlg8epfG3wlkUZ8tJI/QkEtq9NI8znTTmZSa83SR4Rv7OT7QqWSzgDwoIJ8J4uqSsFLUu/wAqxQTLKyQkE9AVeApFxHAMQwUUKSk6qZA9S/kDDQ9K4R8ToW2ah5JJvuWpGlw+MTZK6FmfKL+PoLR5PgMEiWplzFKrZCShI6qWQfEJMb7hWKQEgpAAOrqNepHyEAsahSnFCbaU+cDOIIWUnsBju6/QRakTUrZi+5cn6R2rCZS6Vkfta/jpDGWMnoSktkJVzoPIOfB4iWtRpYbBgIN8WwgJcEBZehdVq6UeAKiXv8x6aR05us2HpqfL+Y5J5QzwnjTOkYUMIqYniCEFioOTb7wW4c1bMImBU/FrCwRkyUq9wfrEZ42jO2guqwFv9wfKU/EZhQ8sghwaQ0b1kE4zx/N2R2r1qNaU/wBRj50xQUSXrXf31ixxAEqJIPmH8oqiYqtaaU9tHCO1MVtcFI0It/ER52ux6UfxESVNi+4B9KXi1I4TOWOzJmq/tlqPi7e3iqQYZKCRlLK/caeYtRrxrvhLgQmzklYOVP6QFJVfUdk8w8Z4cAnpNUKT/eUIOmhU4j2H4A4CjDSQslJWqpI+VCxbeDNPyyNTgsMlCQBYb+6Q/FcUiVLUtaglKQSST7rpEmcM7+fT/Uee/wDFvGKEuSgHslRURorIAwPzhxz1juOcYXMmFSCUpJLXdhYnnA3+mxCyxzVALHWAx4gsqfXoQzbQTVx5fYc1AUPMRSctbRTgnG8TgVlSVAp/Mk1Bbk9Dzj2T4V+JEYyVnAyrSwWl3ZxQg6pMfOk3OtfeIF30Eemf8KVqEycA5AShHiHv6wqvWFrpy90jzv4v4PKllU1EmUVqOZS5gXMY8gDG7Utm1fU1D30tEOLW47wG5pTn2gWis8E8eJYjiWJRT8WUgaBKVIYi9FJLH3zgXisVOWe3PK3/AO6a+BIH0jcfEBlpCgpIVq68MhUsVNCtCSoVrXeMmsJWezhsOsf9tcxLj/Ff0jLYKgKSXBHgoecaLgWNUFJJKdK6seenWKGI/p0nKrDTJSjomaotzaYgn1i5wyVI/KuYD+5CF/JQgqj1bhWKzISTlPLc05sfOLGJmpa+XTsuedYxuCxJQ2SeDSxzobwKcvmYKyJc1VXB5J7RA/xFoJVYbiM/ISy8pLOlXI39veBS54UdBuzVOp0IifiU8pBQoKv2QoG37cwejWNubQOkrB1flHbmufUWAqI501KQSosOcdEsHNoxfG+J/jLKEk5Bse8RR3htwSasY/4iUolMsMAe8dWrSBiZpqtRcmpJq8QY9ICE0qDpTzEUlKUWKgckc7dbzBNDrYqJbQPQF/leO1ELIB7qTpqf4EUpOJUugoNT9oK4SWklKEVJp53eAthh0DKlnZg3SFDypJypDigAvtCjrjnrJ4viCB3kKVtmVKHoJZ+cQJ44kdzCyn3UVK9BlHpDY/AkEks9y4ZvOKH4AJqP/wA7fqjlL462CiOO4kikxMtOmRKEpHRg5iKZxRa6LnTlilMxSk9HJ+XhA5aMxoFPQBnL6AAavygvw7ColrSF5lrJ/wDSQQSGH/uLFE8wK3ciJRoPhjhqJpzCQkNVwpRWOudwL6R6ngFFKAGAbQaDnpGE4VxwgDtpSknKAHyuCHTLH5juq2geNfgsUhQqXOoGnI841yz1ojMmJUM1vG48Yx/xxw44iQUJUStJzJdrs2UnmC0aCbiUEEkDw2s7np6RnuKLDKUla0Bm0A3JamxhuM68dmTFIdKkspP6rjz1iitRNo2XG5a1mvbsMxAD8wLiA4wgSK5XF610A+cZ1pSwEta1BCQaln28Y9e+C5QkSsiGKlHMtaiU51EVyi9Oe8efYMoBSaqaoADVGnV/nGm4dPmqACE5RRjWxu4eh6/WLcVekIxDCxe979Pn5WiGbxJNlBxoQD70secBpMteUBZB5ciLfIf7ipNxCk5kZhuHruSLhnFb3gtokZLj0g/ikoWZSy+VWYhC2NQkjuKs4NK2DwJVOnAstAU188sF/EMfEGNOZTqKikKSe8l78xftDQjbwi/h8BJmI7KsxFLsuXbkaU2b6mujJylg9l1pTo5/Glp8FDMkUNKxdkcPFF5EsKZ5anSf8VWPJx0gzJ4ZkUcwVRr5SKaOBbw2ggFSwaZQqz5mPQgGvlGbT/ihhMGQApK3H7aHxF31pFxE9IISBXQk0J2aIp2Il2KWVZ0hw735+kMELYqORaaVZjyJZiDe8UFh8Tj5hGXOQbhIGduoW+4jnDzQkAzEIWo2CRkf9zpp4RAonvZgRsdLuQRtfT1jmYtgpRGUAP1PtvWOnNxiwO47xiUSqUEpSdc/4ikl/wAroW48jGZEpdShCFC7IAU2/edURzJmacVqLgk19+ES4mcE93qGu8XV0zmT1xhpzj/qJCn2ASoaN7EWJctBcByOdPTWOROWoB3N2Cw55XrvFrCzEpDFICvMPyewjNMgCcP2sodIBObm9Q3SNFwTCpC0hAq7k3p1gfhsIubMIAGV6nQCNfgMCiUlk+JNzG+ed9Z6uLMKHhR2xyU8fw5K+2VnKDaofmSba+xA9Hw7nJCVgIuoglQANXVSDM5CljMo5UJdyw/+KBvzPWBs7FLXmQkpQhAclyMo3Ubkne5No8cuvTSTwwI7MoNfPMVQsKO5UcielS8L/lIZkZsmuUZVTT+klnSirN8yaQScQmqnUiQg9pRVkMxbUDM5LaCwG8XsBx0FWdR/DS2YE/lQ7Z1qNiqyQH1POOkjNRLkLlHOpIzswAtLT+lP7ueldYIS+MJQgoFGZLuwK1DMoDWiaeMCMf8AE0iYvKhylIJsWIT2mA1chv8AKAmPx5SoSwsgo7+WgK1dpdRoO7/jBFfWz/rVFCQC2ckkmhIDAUvvteIsXhSsMVHa+rNbe0Z/DY0gSiTdJN699bV291glheJJJKSrtXPLkOdIhiLF8CUTVbgMWci1PlEMrgSUl1DNSuxaloKDGPUnU32jqXinDht/CHVjjA8IQg2FPHxfTwjRYeYiWGoH8+Y9/WM7I4rVgHAZiKONfVopcQ49LHZJqajUgsX99IDjQcT48hDh9aHRQegpY08G5QAncWBaaGOUioOx1pWrU2VGZm8SKyUqJazt09KP4RBhJlSgmi6OSKE0Ch6eHSLNX03MrjMrMUpAALKANw9RXX+BFE49SFlcshYL0UBmADOyxVQ3BqKPGWmIWUIJfMh0K3vmQfUjwi/gJKx2geZBcPzDa87xfSxpBxtcwZpYB/VLIOYDdCrkeoYxMjFKWGUCLMSgL0/UGIp1iDh+FQsgvkX0IJO9LnpzpBpGGDuUOprCyt1J0PTnGCWAkJoCpBPQa9f4i6qUEF2I3KVMnxrR46lYVRHYOWljUHk1wW8I4nYjKGWkA2IqAobpVpodNIYHK8NJUXURbQsH5gWPMeUAOMoQhJABKLgC1NRuLwQxMtFQkl6WZ9x9vCAnE1KQhu8k3SbW9DzFY0mWnKcmwdgAP5rHWFk1cnzpFvD4QLJUDUO6D3mGo3jlaamproaNytCsTZhkNMzHxALeURyVZlNdWnMw7hCSfekG+CcPA/6igMxtyh55+VHXUi9w/C/hoA1NT1Pzi1Dw0d8xxu0oUM8KEnxizOWlCAwZ9glJq7NtbmTEc7hyWKbISXP6j+5Z0LWF6sN4szsWtSskpLd0qX9mFWFq7GKhQVgpz5UgEku4FaKX+4iw1q0eLP07yg+J4UmdMGcpRLQCogHsoQNBeqi25JL9M3xrEKmKISGQ7gVqbBR8AABoKczseJzEBKZaB2XzKo5WpqFW7AgbBzATGYVJ3FNq+W3XaHbFmgfBZaUrK11CApbbhAceaglPidooTC5KlGqiSdHJLnnflB5eFCJS1B3mEITSuVLLWfMJHnAafhTTn/Mb0YsY2YElCWqJaAXJ1GYilqkxPgMYM6QyQxDEAjUULxU4ml5qz+5m6AAfKIUOC4u9ALDWnOkVUGMbi1FbB8p7W5JVo/k8WpnFcgSE0SyQrLViCbeg8OcCCpbqQ6mc6mxeJU4U2owFubVbq0Z2FP8A1lFEKyl7BzQg8iGpA7EziVKZT1e1ga62i4MOCG0HjXnztEx4WCQ3JjoeYFvCLUEoKjsfT6xdw8hSmcU0r6e+cXxwxKdT5UizJlBCXUGBpb28HyWO5GFckOO0Khm7STQjn/5RJKlKDsBS7H6G8dSwxJfmOdKKHiBDKUQoK08bNSnp4RRauyFEGiW11fkRq/usHpK5jAgpVR2NH+r3gHIWo91KjyyqcttoIJYYZR2wQNmNPqDWHBRuVUZgCNwFOOo118I6mhSk5n669PPyijIkoLKCy35dDXY0O9IvkLCSreyRQB9VHenyhZCVSDmdZBUdBTw3ipxXCulm8qeusFpWHzlQAs7uNbO557RLOwrpykvTZm/iAvMyooWpCrgu/wBREq5gu4zehgzxvgSldoVPKh68xAvhPw+ta+0TlF39YbcM9WOEYEzVBSu4n1O8afJtF7D8PyICUtFacltftHXj6c+vtCYaHMIR0YJoUNCiSziEhQICVJQCzJDZm6VU9PAHeA4lFS1KKSmWjMVJcspVHdSmBJHZ5PFmbxMAZEoLKpRitWb8xNkgF6B7RQnALzSyBlGQsDmHYJUSX3VU9E7R5Y7qScWEqUo9pay7v2UpT3qaeGoNaRS/5pmLBJW5oCchq/Z2aLiMAVIUoJIBASkMQWrYG/dSPGJcVwMpQCkHMsJBAYZFFgoE7xFW4iCoICUjuZzWgKy71/aAfGBi5iGDgO4drDTrvBvH4XthKi6cuWuyE5Ax0ci8DVoQlSb2atSxdjZnpCFSYEKUSKuovoz7vZ4b+nrSo3DH00jkTRnUlIDOpywBDWPrE0pfZyh7k8/B6ePSDC6QkGodyw0vr8ollkVBFafXQxzKlXYEv4EGo6tW/wBo6StKqF3tdtw3XrAcRiXWoI387sYvYZaUu5zJuQxZtC9wXpT/AFA2VwVEUveljQHeO5cupAUk9TWkKxZm4kZQoDld/F2ez6CIjPBQyx6e/lHSJC2cCmrlNPF4lmYAkBaXUDcAg1157efkBDh05bKUBQgkO3O9txBCTLUqgSoG7uQKl96eEUipctgygNCyjrbYRMgrWmhpzBPW2kMQpLw4/OoJOwW6T/cPYi8gZRRYP9retm9YGYaUUhyphyQpXzNIKyap7KL6lLejQpKiapXPc0d/0iIpmOWkgMa2Ar1pq0N/STVkBCWauahCX2Asb1FYsysOpQyEkt+ZqgasRFIxbqLD4tS1UGUu7Ox072x+8XZgUxUlRfZO/OI5eFlS+7q9+9zv7ryi9LkKZwtJGxAt1MFh0CnrUtQ7Ndat5wV4Zg/zENRmeLKFknspSf3ARaQg3VTl/EGHUWJAyn6QDxJOvWC2NWoflPgfvAWcSS5Md+JkcurqIw0PCaNsmeFChQkLk4V1qypI7IANaABKUgE0BJ+kXDJyhKE5aAHQjXsuXoAxc0vHa1MyzVzlCbJSBmsP8R41iTD4UGcpJ1Uc5q6gkDs37IL6R5XZ1hpRQj8Ra2YFKa9m5UFFKdWDBrsd4jlTEqQSXAKkkWc5cyja2ag1+UT4xAMiYs6qAbTsW8OUUFL7x/SggDS4BJ3d3i1YbFIzFBoynzAg6kv1qR6QK40jKoqT3iD0TpTSvy6wRnziJZUKMEsNs6yD9PKBf9KCVAktdvAn6RLAuZKqFteh6Gjv7vCw+FUGSGZnod9R/HSCapYLA2ofQ0+sKTKDFOjn1qR5wa04loyJIIClDV7C1xe46bxZXLSRVOVQap1JG+9vOLuGwaRU1agBtUXO8Nipop2aPZzualme0SCZmFWLjerUbppEctCksWcdHMFhOsGFQTrRvGOMOvMAGa1ufziw/bnDKlEn8pIqCoNpaCOGmIQ4KsyTdJA8wRaKWK4ckVBOhbqDDYRINKsRYkGrO9oozg3LMojsKI5FLseu0dGYgAhUwvyypPpcQImggGtnHVnvFGRPzd5IOm28IwenYiWggZZjHUdlJ/uI7x5ekWUTkq7QUS1gruj34QM/AysxoQCQa36/OB+FxJMwigAzAjcbcoR4O4ni4By5lc27KT03i/h5+cAAOLEBVRzY3gLIkfhqZJuHqAWJ6xbmcRUgtlSXuWY+nSHPyKJYnDEtUO1czJdrVevrEsjEFDJUc3M/zpA3GTMqHNbasWYqZy+pibhzFNh84lngzKxRevyiwtZNiX84hkgMKRwrEVZvWHmeiquLWbKBrasDJiW28INTS4rAfEJYx0jFQQ6YbWEI3jMNChnh4mn/2Q=="
                        }
                        let index = rows[i]["index"]
                        let artist = rows[i]["artist"]
                        let desc = rows[i]["desc"]
                        let title = rows[i]["title"]
                        let id = rows[i]['id']

                        let temp_html
                        if (response['id'] == id) {
                            temp_html = `<div class="cards" id="cards">
                                            <div class="picture-box">
                                                <a href="/detail?index=${index}">
                                                    <img href="/detail?index=${index}" src=${URL} alt="" class="img">
                                                </a>
                                            </div>
                                            <div class="card" >
                                                <div class="card-body">
                                                    <h1 class="card-title">${title}</h1>
                                                    <h6 class="card-subtitle mb-2 text-muted">${artist}</h6>
                                                     <h6 class="card-text">${id} 님</h6>
                                                     <div class='empty-box'>

                                                       </div>
                                                    <p class="card-text">${desc}</p>

                                                </div>


                                            <div class = "delete-buttons" id = 'delete-buttons${index}'>
                                            <button type="button"  onclick = "delete_contents(${index})"  class="btn btn-danger">게시물 삭제</button>

                                            </div>

                                                            </div>

                                        </div>`

                        } else if (response['id'] == undefined) {
                            temp_html = `<div class="cards" id="cards">
                                            <div class="picture-box">
                                                <a href="/detail?index=${index}">
                                                    <img href="/detail?index=${index}" src=${URL} alt="" class="img">
                                                </a>
                                            </div>
                                            <div class="card" >
                                                <div class="card-body">
                                                    <h1 class="card-title">${title}</h1>
                                                    <h6 class="card-subtitle mb-2 text-muted">${artist}</h6>
                                                    <h6 class="card-text">${id} 님</h6>
                                                     <div class='empty-box'>
                                                       </div>
                                                    <p class="card-text">${desc}</p>

                                                </div>
                                                </div>

                                        </div>`
                        } else {
                            temp_html = `<div class="cards" id="cards">
                                            <div class="picture-box">
                                                <a href="/detail?index=${index}">
                                                    <img href="/detail?index=${index}" src=${URL} alt="" class="img">
                                                </a>
                                            </div>
                                            <div class="card" >
                                                <div class="card-body">
                                                    <h1 class="card-title">${title}</h1>
                                                    <h6 class="card-subtitle mb-2 text-muted">${artist}</h6>
                                                     <h6 class="card-text">${id} 님</h6>
                                                     <div class='empty-box'>

                                                       </div>
                                                    <p class="card-text">${desc}</p>

                                                </div>
<div id = 'favorite_block${index}'><button onclick="favorite_content(${index})" class = "Favorites"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-through-heart" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M2.854 15.854A.5.5 0 0 1 2 15.5V14H.5a.5.5 0 0 1-.354-.854l1.5-1.5A.5.5 0 0 1 2 11.5h1.793l.53-.53c-.771-.802-1.328-1.58-1.704-2.32-.798-1.575-.775-2.996-.213-4.092C3.426 2.565 6.18 1.809 8 3.233c1.25-.98 2.944-.928 4.212-.152L13.292 2 12.147.854A.5.5 0 0 1 12.5 0h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.854.354L14 2.707l-1.006 1.006c.236.248.44.531.6.845.562 1.096.585 2.517-.213 4.092-.793 1.563-2.395 3.288-5.105 5.08L8 13.912l-.276-.182a21.86 21.86 0 0 1-2.685-2.062l-.539.54V14a.5.5 0 0 1-.146.354l-1.5 1.5Zm2.893-4.894A20.419 20.419 0 0 0 8 12.71c2.456-1.666 3.827-3.207 4.489-4.512.679-1.34.607-2.42.215-3.185-.817-1.595-3.087-2.054-4.346-.761L8 4.62l-.358-.368c-1.259-1.293-3.53-.834-4.346.761-.392.766-.464 1.845.215 3.185.323.636.815 1.33 1.519 2.065l1.866-1.867a.5.5 0 1 1 .708.708L5.747 10.96Z"/>
</svg></button></div>
                                                </div>

                                        </div>`

                        }
                        $('#contents').append(temp_html)
                        if (rows[i]['index'] == favorite_content_index[favorite_num]) {
                            let con = document.querySelector('#favorite_block' + index)
                            con.innerHTML = `<button onclick="favorite_content_del(${index})" class = "Favorites"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-through-heart-fill" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M2.854 15.854A.5.5 0 0 1 2 15.5V14H.5a.5.5 0 0 1-.354-.854l1.5-1.5A.5.5 0 0 1 2 11.5h1.793l3.103-3.104a.5.5 0 1 1 .708.708L4.5 12.207V14a.5.5 0 0 1-.146.354l-1.5 1.5ZM16 3.5a.5.5 0 0 1-.854.354L14 2.707l-1.006 1.006c.236.248.44.531.6.845.562 1.096.585 2.517-.213 4.092-.793 1.563-2.395 3.288-5.105 5.08L8 13.912l-.276-.182A23.825 23.825 0 0 1 5.8 12.323L8.31 9.81a1.5 1.5 0 0 0-2.122-2.122L3.657 10.22a8.827 8.827 0 0 1-1.039-1.57c-.798-1.576-.775-2.997-.213-4.093C3.426 2.565 6.18 1.809 8 3.233c1.25-.98 2.944-.928 4.212-.152L13.292 2 12.147.854A.5.5 0 0 1 12.5 0h3a.5.5 0 0 1 .5.5v3Z"/>
</svg></button>`
                            favorite_num += 1
                        }
                    }
                }
            });
        } //페이지 로딩시 게시물 출력


        function share() {
            $('#post-box').show()
        };

        function close_button() {
            $('#post-box').hide()
        };

        function shareMyMusic() {
            let URL = $('#inputURL').val()
            let artist = $('#inputArtist').val()
            let desc = $('#inputDESC').val()
            let title = $('#inputTitle').val()

            //이곳에서 로그인한 사용자의 닉네임을 받아와야함!
            $.ajax({
                type: 'POST',
                url: '/',
                data: {'artist_give': artist, 'title_give': title, 'desc_give': desc, 'url_give': URL},
                success: function (response) {
                    if (response['success'] == 'true') {
                        alert(response['msg'])
                        window.location.reload()

                    } else {
                        alert(response['msg'])
                        window.location.href = '/login'
                    }

                }
            });
        };

        function logout() {
            $.removeCookie('mytoken');
            window.location.href = '/'
        }
    </script>


</head>
<body>

<div id="header">

</div>
<div class='shareButton'>
    <button onclick="share()" type="button" class="btn btn-outline-light">내 노래 공유하기!</button>
</div>
<main>
    <div class="myPost" id="post-box">
        <div class="form-floating">
            <textarea class="form-control" placeholder="Leave a comment here" id="inputURL"></textarea>
            <label for="floatingTextarea">앨범 url</label>
        </div>
        <div class="form-floating">
            <textarea class="form-control" placeholder="Leave a comment here" id="inputTitle"></textarea>
            <label for="floatingTextarea">노래 제목</label>
        </div>
        <div class="form-floating">
            <textarea class="form-control" placeholder="Leave a comment here" id="inputArtist"></textarea>
            <label for="floatingTextarea">가수 이름</label>
        </div>
        <div class="form-floating">
            <textarea class="form-control" placeholder="Leave a comment here" id="inputDESC"
                      style="height: 100px"></textarea>
            <label for="floatingTextarea2" id='comment'>노래 설명</label>

            <div class="buttons">

                <button onclick="shareMyMusic()" style="margin-right: 10px" type="button" class="btn btn-dark">공유하기!
                </button>
                <button onclick="close_button()" style="margin-left: 0px" type="button" class="btn btn-outline-dark">
                    닫기
                </button>
            </div>
        </div>
    </div>

    <div id="contents">

    </div>
    <div class="more-contents-button">


        <button onclick="showContents()" id="more_content-button" class="button is-success is-outlined">더보기</button>


    </div>
    <div id="footer">

    </div>

    <script>
        $(document).ready(function () {
            $("#header").load("/header");  // 원하는 파일 경로를 삽입하면 된다
            $("#footer").load("/footer");  // 추가 인클루드를 원할 경우 이런식으로 추가하면 된다
        });
    </script>
</main>
</body>
</html>